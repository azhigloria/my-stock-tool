# --- 在代码中替换对应的 Prompt 部分 ---

            prompt = f"""
            你现在是极简主义投资专家。请根据以下数据，严格参照《分析框架》输出极简研报。
            禁止使用长段落，禁止废话，多用表格、Emoji和短句。

            ### 框架要求：
            1. **公司画像**：使用Markdown表格 [公司|核心标签|一句话护城河]。
            2. **多维对撞**：对比各家公司，每家只列出 [✅逻辑重点] 和 [❌核心风险]，字数控制在30字内。
            3. **理性定论**：根据数据，直接给出三类人的选择：
               - 稳健派：[选谁+理由]
               - 进攻派：[选谁+理由]
               - 避坑指南：[谁不能碰+理由]

            待分析数据：{str(raw_results)}
            """

# --- 下方渲染部分也做了精简优化 ---
            try:
                response = model.generate_content(prompt)
                
                # 顶部雷达图：直接看体质
                st.subheader("📊 竞争力多维对撞")
                # ...（保持雷达图代码不变）...
                
                # 下方 AI 研报：使用简洁容器
                st.markdown("---")
                st.markdown("### 🤖 Gemini 极简决策报告")
                # 这里的样式让 AI 输出的内容更像卡片
                st.info(response.text) 
                
            except Exception as e:
                st.error(f"AI 生成失败: {e}")
